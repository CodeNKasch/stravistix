<h2 class="mat-display-1">Fitness trend configuration</h2>
<mat-dialog-content class="mat-body-1">

	<section>
		<h3 class="mat-headline">Heart rate stress score calculation mode</h3>

		<mat-radio-group (change)="onModeChange()"
						 [(ngModel)]="fitnessTrendConfigDialogData.fitnessTrendConfigModel.heartRateImpulseMode">
			<mat-radio-button value="{{HeartRateImpulseMode.HRSS}}">HRSS: Heart Rate Stress Score (recommend)
			</mat-radio-button>
			<mat-radio-button value="{{HeartRateImpulseMode.TRIMP}}">TRIMP: Training Impulse (not recommend)
			</mat-radio-button>
		</mat-radio-group>

		<div
			*ngIf="(fitnessTrendConfigDialogData.fitnessTrendConfigModel.heartRateImpulseMode === HeartRateImpulseMode.TRIMP)">
		<span>
			<mat-icon color="warn" [style.vertical-align]="'bottom'">warning</mat-icon>
			When heart rate stress score calculation method is set to TRIMP (Training Impulse):
			<ul>
				<li>
					Training Zones will be disabled because TRIMP has a scale missmatch with Training Zones.
				</li>
				<li>
					Cycling Power Stress Scores (PSS) will not be taken into account because TRIMP scores are not scaled with PSS stress scores.
				</li>
				<li>
					Swimming Stress Scores (SSS) will not be taken into account because TRIMP scores are not scaled with SSS stress scores.
				</li>
			</ul>
		</span>
		</div>
	</section>

	<section>
		<h3 class="mat-headline">Estimate stress scores for activities without heart rate or power data</h3>
		<mat-slide-toggle
			[(ngModel)]="fitnessTrendConfigDialogData.fitnessTrendConfigModel.allowEstimatedPowerStressScore"
			matTooltip="">
			Enable Cycling Power Stress Score (PSS) Estimation.
		</mat-slide-toggle>

		<div class="hint">
			Athlete cycling FTP must be set + Power meter toggle
		</div>

		<mat-slide-toggle
			[(ngModel)]="fitnessTrendConfigDialogData.fitnessTrendConfigModel.allowEstimatedRunningStressScore"
			matTooltip="">
			Enable Running Stress Score (RSS) Estimation.
		</mat-slide-toggle>
		<div class="hint">
			Athlete running FTP must be set
		</div>
	</section>

	<section>
		<h3 class="mat-headline">Exclude activities from fitness trend</h3>

		<div class="hint">
			Here you can exclude some unwanted activities in the fitness trend based on their name and exclusion
			patterns. For example, you have performed several downhill mountain bike activities where you took the ski
			lift many times. If stress scores are estimated, they gonna to be huge and not relevant
			of your efforts. Assuming you put the tag "#MTBDH" in all these activities, you just need to set a new line
			with "#MTBDH" in the below input to exclude them. Note: you may need to change some activities name directly
			in
			strava and launch a manual sync from that app to see changes in fitness trend.
		</div>

		<textarea matInput
				  [(ngModel)]="ignoreActivityNamePatterns"
				  (change)="onIgnoreActivityNamePatternsChange()"
				  rows="5"
				  placeholder="Enter activity name patterns exclusion (1 per line, case sensitive)"></textarea>
	</section>

	<section>
		<h3 class="mat-headline">Ignore activities before date</h3>

		<div class="hint">
			You can ignore activities in your fitness trend until a specific date. The starting date will be defined on
			the first activity you have performed from the date entered. Leaving a field empty means that you don't
			ignore activities.
		</div>

		<mat-form-field>
			<input matInput
				   [(ngModel)]="ignoreBeforeDate"
				   [max]="ignoreBeforeMaxDate"
				   [matDatepicker]="datePickerTo"
				   (dateChange)="onIgnoreBeforeDateChange()"
				   placeholder="Enter a date">
			<mat-datepicker-toggle matSuffix [for]="datePickerTo"></mat-datepicker-toggle>
			<mat-datepicker #datePickerTo></mat-datepicker>
		</mat-form-field>
	</section>

	<section>
		<h3 class="mat-headline">Fitness and fatigue starting values</h3>

		<div class="hint">
			Your fitness trend will start with the below values. Leaving a field empty equals to set a value of <strong>0</strong>
		</div>

		<div fxLayout="column" fxLayoutAlign="start start">
			<mat-form-field>
				<input
					matInput
					type="number" min="1"
					[(ngModel)]="fitnessTrendConfigDialogData.fitnessTrendConfigModel.initializedFitnessTrendModel.ctl"
					(change)="onInitialFitnessChange()"/>
				<mat-placeholder>
					Fitness starting value
				</mat-placeholder>
			</mat-form-field>

			<mat-form-field>
				<input
					matInput
					type="number" min="1"
					[(ngModel)]="fitnessTrendConfigDialogData.fitnessTrendConfigModel.initializedFitnessTrendModel.atl"
					(change)="onInitialFatigueChange()"/>
				<mat-placeholder>
					Fatigue starting value
				</mat-placeholder>
			</mat-form-field>
		</div>

	</section>

</mat-dialog-content>

<mat-dialog-actions>
	<button mat-button mat-dialog-close color="primary" (click)="onSave()">Save</button>
	<button mat-button mat-dialog-close color="primary" (click)="onCancel()">Cancel</button>
</mat-dialog-actions>
